<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Inscrição - SESCON-SP / AESCON-SP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos Customizados para Cores SESCON/AESCON */
        :root {
            --sescon-red: #cc0000;
            --aescon-gray: #333;
        }
        .header-brand {
            border-bottom: 3px solid var(--sescon-red);
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        .header-brand img {
            max-width: 250px;
        }
        .btn-primary-sescon {
            background-color: var(--sescon-red);
            border-color: var(--sescon-red);
            transition: background-color 0.3s;
        }
        .btn-primary-sescon:hover {
            background-color: #a00000;
            border-color: #a00000;
        }
        .alert-territorio {
            background-color: #fff3cd;
            color: #856404;
            border-color: #ffeeba;
        }
        .form-section-title {
            color: var(--aescon-gray);
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-bottom: 20px;
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card p-4 shadow-lg">
                <div class="header-brand text-center">
                    <img src="https://via.placeholder.com/250x50?text=LOGO+SESCON/AESCON" alt="Logos SESCON-SP e AESCON-SP" class="img-fluid">
                    <h1 class="h4 mt-2" style="color: var(--sescon-red);">FICHA DE INSCRIÇÃO PARA ASSOCIAÇÃO</h1>
                </div>

                <form id="associationForm" method="POST" action="SEU_ARQUIVO_DE_BACKEND_ATUAL.php">
                    
                    <h2 class="form-section-title">1. Dados da Empresa</h2>

                    <div class="mb-3">
                        <label for="razaoSocial" class="form-label">Razão Social: <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="razaoSocial" name="razaoSocial" required>
                    </div>

                    <div class="row">
                        <div class="col-md-7 mb-3">
                            <label for="cnpj" class="form-label">CNPJ: <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="cnpj" name="cnpj" maxlength="18" required onblur="lookupCNPJ(this.value)">
                            <div class="form-text text-danger" id="cnpj-error"></div>
                        </div>
                        <div class="col-md-5 mb-3">
                            <label for="telefone" class="form-label">Telefone (WhatsApp): <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="telefone" name="telefone" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="endereco" class="form-label">Endereço:</label>
                        <input type="text" class="form-control" id="endereco" name="endereco" readonly>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">E-mail: <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" id="email" name="email" required>
                    </div>

                    <div class="mb-3">
                        <label for="servicosInteresse" class="form-label">Serviços de Interesse:</label>
                        <textarea class="form-control" id="servicosInteresse" name="servicosInteresse" rows="2" placeholder="Ex: ER JUCESP - FATURADO, EVI"></textarea>
                    </div>

                    <h2 class="form-section-title mt-4">2. Dados do Sócio/Responsável</h2>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="nomeSocio" class="form-label">Nome Completo: <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="nomeSocio" name="nomeSocio" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="cpfSocio" class="form-label">CPF do Sócio: <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="cpfSocio" name="cpfSocio" maxlength="14" required>
                        </div>
                    </div>

                    <h2 class="form-section-title mt-4">3. Plano e Valores</h2>

                    <div class="mb-3">
                        <label for="planoSuggerido" class="form-label">Plano Sugerido: <span class="text-danger">*</span></label>
                        <select class="form-select" id="planoSuggerido" name="planoSuggerido" required onchange="updatePlanDetails(this.value)">
                            <option value="">Selecione um plano</option>
                            <option value="Plano Ouro Premium">Plano Ouro Premium</option>
                            <option value="Plano Ouro">Plano Ouro</option>
                            <option value="Plano Prata">Plano Prata</option>
                        </select>
                        <div class="mt-2 p-2 border rounded" id="plano-details" style="min-height: 50px; background-color: #f8f9fa;">
                            Selecione um plano para ver a descrição.
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="valorAVista" class="form-label">Valor à Vista:</label>
                            <input type="text" class="form-control" id="valorAVista" name="valorAVista" value="N/A" readonly>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="valorParcelado" class="form-label">Valor Parcelado:</label>
                            <input type="text" class="form-control" id="valorParcelado" name="valorParcelado" value="N/A" readonly>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary-sescon btn-lg w-100 mt-4">
                        Enviar Ficha de Inscrição
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // --- LÓGICA DE FRONTEND (JAVASCRIPT) ---
    // (As máscaras e a simulação de consulta CNPJ permanecem para usabilidade)

    const cnpjInput = document.getElementById('cnpj');
    
    // 1. MÁSCARA CNPJ
    cnpjInput.addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, ''); 
        value = value.replace(/^(\d{2})(\d)/, '$1.$2'); 
        value = value.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
        value = value.replace(/\.(\d{3})(\d)/, '.$1/$2'); 
        value = value.replace(/(\d{4})(\d)/, '$1-$2'); 
        e.target.value = value.substring(0, 18);
    });

    // 2. MÁSCARA CPF
    document.getElementById('cpfSocio').addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, ''); 
        value = value.replace(/(\d{3})(\d)/, '$1.$2'); 
        value = value.replace(/(\d{3})(\d)/, '$1.$2'); 
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        e.target.value = value.substring(0, 14);
    });
    
    // 3. SIMULAÇÃO DE CONSULTA CNPJ e Regra de Base Territorial
    function lookupCNPJ(cnpj) {
        const errorDiv = document.getElementById('cnpj-error');
        errorDiv.textContent = '';
        
        // Limpa campos preenchidos automaticamente
        document.getElementById('razaoSocial').value = '';
        document.getElementById('endereco').value = '';

        // Simulação de Validação e Preenchimento (será substituída pelo BACKEND)
        if (cnpj.includes('07513000000134')) { // CNPJ do seu PDF de Exemplo [cite: 4]
            document.getElementById('razaoSocial').value = 'NOME DA EMPRESA (API PREENCHE)';
            document.getElementById('endereco').value = 'AV. BRASIL, 123 - CENTRO';
            // A lógica real de bloqueio de Base Territorial (Campinas, Santos, etc.)
            // DEVE estar no código de Backend.
        }
        // ... (o restante da lógica de simulação permanece)
    }
    
    // 4. LÓGICA DE ATUALIZAÇÃO DO PLANO E VALORES
    function updatePlanDetails(plano) {
        const detailsDiv = document.getElementById('plano-details');
        const vistaInput = document.getElementById('valorAVista');
        const parceladoInput = document.getElementById('valorParcelado');
        let descricao = '';
        let valorBase = 0;

        if (plano === 'Plano Ouro Premium') {
            descricao = 'Inclui associação ao SESCON e à AESCON-SP + Contribuição Representativa. O plano mais completo.';
            valorBase = 1200.00;
        } else if (plano === 'Plano Ouro') {
            descricao = 'Plano Ouro. Inclui associação ao SESCON-SP e à AESCON-SP.';
            valorBase = 900.00;
        } else if (plano === 'Plano Prata') {
            descricao = 'Plano Prata. Serviços essenciais. Inclui apenas associação ao SESCON-SP.';
            valorBase = 500.00;
        } else {
            descricao = 'Selecione um plano para ver a descrição.';
            valorBase = 0.00;
        }

        // Atualiza a descrição
        detailsDiv.innerHTML = descricao;
        
        // Simulação de Cálculo Proporcional (A LÓGICA FINAL É NO BACKEND!)
        const mesAtual = new Date().getMonth() + 1; 
        const mesesRestantes = 12 - mesAtual + 1;
        
        let valorProporcional = 0;
        if (valorBase > 0) {
            valorProporcional = (valorBase / 12) * mesesRestantes;
        }
        
        // Atualiza os campos de Valor À Vista e Parcelado
        if (valorProporcional > 0) {
            vistaInput.value = `R$ ${valorProporcional.toFixed(2).replace('.', ',')}`;
            // Simulação de parcelamento (ex: 3x)
            parceladoInput.value = `3x R$ ${(valorProporcional / 3).toFixed(2).replace('.', ',')}`;
        } else {
            vistaInput.value = 'N/A'; // N/A, conforme o PDF [cite: 14]
            parceladoInput.value = 'N/A'; // N/A, conforme o PDF [cite: 15]
        }
    }
</script>

</body>
</html>
